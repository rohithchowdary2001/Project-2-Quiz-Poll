{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rohit\\\\OneDrive\\\\Desktop\\\\MS OCU\\\\MS Project 2\\\\Quiz-Poll\\\\frontend\\\\src\\\\components\\\\professor\\\\QuizResults.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport api from '../../services/api';\n// import socket from '../../services/socket';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(import.meta.env.VITE_BACKEND_URL);\nsocket.on('quiz_result', data => {\n  console.log('New quiz result received:', data);\n  // Optionally trigger a refresh or update your quiz results state here\n});\nconst QuizResults = () => {\n  _s();\n  const {\n    quizId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const [quiz, setQuiz] = useState(null);\n  const [results, setResults] = useState([]);\n  const [answerStats, setAnswerStats] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [sortBy, setSortBy] = useState('submitted_at');\n  const [sortOrder, setSortOrder] = useState('DESC');\n  useEffect(() => {\n    if (quizId) {\n      fetchQuizResults();\n    }\n  }, [quizId, sortBy, sortOrder]);\n  useEffect(() => {\n    const handleLiveResult = newResult => {\n      if (newResult.quizId.toString() !== quizId.toString()) return;\n      console.log('Live result received:', newResult);\n      setResults(prevResults => {\n        const exists = prevResults.some(r => r.id === newResult.id);\n        if (exists) return prevResults; // Avoid duplicates\n        return [newResult, ...prevResults];\n      });\n    };\n    socket.on('quiz_result', handleLiveResult);\n    return () => {\n      socket.off('quiz_result', handleLiveResult);\n    };\n  }, [quizId]);\n  const fetchQuizResults = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/quizzes/${quizId}/results`);\n      setQuiz(response.data.quiz);\n      const sortedResults = response.data.results.sort((a, b) => {\n        const aVal = a[sortBy];\n        const bVal = b[sortBy];\n        return sortOrder === 'ASC' ? aVal > bVal ? 1 : -1 : aVal < bVal ? 1 : -1;\n      });\n      setResults(sortedResults);\n      const statsMap = new Map();\n      response.data.answerStatistics.forEach(stat => {\n        if (!statsMap.has(stat.question_id)) {\n          statsMap.set(stat.question_id, {\n            questionId: stat.question_id,\n            questionText: stat.question_text,\n            questionOrder: stat.question_order,\n            options: []\n          });\n        }\n        statsMap.get(stat.question_id).options.push({\n          optionId: stat.option_id,\n          optionText: stat.option_text,\n          isCorrect: stat.is_correct,\n          selectionCount: stat.selection_count,\n          percentage: stat.percentage\n        });\n      });\n      setAnswerStats(Array.from(statsMap.values()).sort((a, b) => a.questionOrder - b.questionOrder));\n      setError('');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('QuizResults - Error fetching results:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to fetch quiz results');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const exportToCSV = async () => {\n    try {\n      const csvData = results.map(result => ({\n        'Student Name': `${result.first_name} ${result.last_name}`,\n        'Username': result.username,\n        'Score': result.total_score,\n        'Max Score': result.max_score,\n        'Percentage': result.percentage,\n        'Time Taken (minutes)': result.time_taken_minutes,\n        'Started At': new Date(result.started_at).toLocaleString(),\n        'Submitted At': new Date(result.submitted_at).toLocaleString()\n      }));\n      if (csvData.length === 0) {\n        alert('No data to export');\n        return;\n      }\n      const headers = Object.keys(csvData[0]);\n      const csvContent = [headers.join(','), ...csvData.map(row => headers.map(field => `\"${row[field]}\"`).join(','))].join('\\n');\n      const blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      const link = document.createElement('a');\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', `quiz_${quizId}_results_${new Date().toISOString().slice(0, 10)}.csv`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      alert('Results exported successfully!');\n    } catch (err) {\n      console.error('QuizResults - Error exporting CSV:', err);\n      alert('Failed to export results');\n    }\n  };\n  const formatDate = dateString => new Date(dateString).toLocaleString();\n  const getGradeBadgeClass = percentage => {\n    if (percentage >= 90) return 'bg-success';\n    if (percentage >= 80) return 'bg-info';\n    if (percentage >= 70) return 'bg-warning';\n    if (percentage >= 60) return 'bg-orange';\n    return 'bg-danger';\n  };\n  const calculateOverallStats = () => {\n    if (results.length === 0) return null;\n    const totalStudents = results.length;\n    const averageScore = results.reduce((sum, result) => sum + result.percentage, 0) / totalStudents;\n    const highestScore = Math.max(...results.map(r => r.percentage));\n    const lowestScore = Math.min(...results.map(r => r.percentage));\n    const passRate = results.filter(r => r.percentage >= 60).length / totalStudents * 100;\n    return {\n      totalStudents,\n      averageScore: Math.round(averageScore),\n      highestScore,\n      lowestScore,\n      passRate: Math.round(passRate)\n    };\n  };\n  const stats = calculateOverallStats();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-primary\",\n        role: \"status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 60\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 16\n    }, this);\n  }\n  if (!quiz) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4 alert alert-danger\",\n      children: \"Quiz not found or you don't have permission to view its results.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [quiz.title, \" - Results\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted mb-0\",\n          children: [\"Total Submissions: \", quiz.totalSubmissions]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success me-2\",\n          onClick: exportToCSV,\n          disabled: results.length === 0,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-download me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }, this), \"Export CSV\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: fetchQuizResults,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-sync-alt me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this), \"Refresh\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 23\n    }, this), stats && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title text-primary\",\n              children: stats.totalStudents\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 113\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text small\",\n              children: \"Total Students\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 179\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 86\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title text-info\",\n              children: [stats.averageScore, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 113\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text small\",\n              children: \"Average Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 176\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 86\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title text-success\",\n              children: [stats.highestScore, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 113\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text small\",\n              children: \"Highest Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 179\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 86\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title text-danger\",\n              children: [stats.lowestScore, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 113\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text small\",\n              children: \"Lowest Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 177\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 86\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title text-warning\",\n              children: [stats.passRate, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 113\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text small\",\n              children: \"Pass Rate (\\u226560%)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 175\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 86\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-0\",\n          children: \"Student Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-select form-select-sm me-2\",\n            value: sortBy,\n            onChange: e => setSortBy(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"submitted_at\",\n              children: \"Submission Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"percentage\",\n              children: \"Score %\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"total_score\",\n              children: \"Score Points\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"time_taken_minutes\",\n              children: \"Time Taken\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"last_name\",\n              children: \"Student Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-select form-select-sm\",\n            value: sortOrder,\n            onChange: e => setSortOrder(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"DESC\",\n              children: \"Descending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ASC\",\n              children: \"Ascending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: results.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted text-center\",\n          children: \"No submissions yet for this quiz.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-striped\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Student\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Score\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Grade\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Time Taken\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Submitted At\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: results.map(result => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [result.first_name, \" \", result.last_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 104\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: result.username\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 110\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [result.total_score, \"/\", result.max_score]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `badge ${getGradeBadgeClass(result.percentage)}`,\n                    children: [result.percentage, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [result.time_taken_minutes, \" min\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatDate(result.submitted_at)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 45\n                }, this)]\n              }, result.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }, this), answerStats.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Question Analysis & Poll Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 50\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: answerStats.map(question => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [\"Question \", question.questionOrder, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 37\n            }, this), \" \", question.questionText]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: question.options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mb-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `card ${option.isCorrect ? 'border-success' : ''}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-body py-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex justify-content-between align-items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      children: [option.isCorrect && /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-check text-success me-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 263,\n                        columnNumber: 85\n                      }, this), option.optionText]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-end\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: [option.selectionCount, \" votes\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 265,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 265,\n                        columnNumber: 107\n                      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: [option.percentage, \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress mt-1\",\n                    style: {\n                      height: '4px'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `progress-bar ${option.isCorrect ? 'bg-success' : 'bg-primary'}`,\n                      style: {\n                        width: `${option.percentage}%`\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 45\n              }, this)\n            }, option.optionId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 33\n          }, this)]\n        }, question.questionId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 9\n  }, this);\n};\n_s(QuizResults, \"N3SriBj6fjb1XNNx1fLwAHDC9/Y=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = QuizResults;\nexport default QuizResults;\nvar _c;\n$RefreshReg$(_c, \"QuizResults\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useAuth","api","io","jsxDEV","_jsxDEV","socket","import","meta","env","VITE_BACKEND_URL","on","data","console","log","QuizResults","_s","quizId","user","quiz","setQuiz","results","setResults","answerStats","setAnswerStats","loading","setLoading","error","setError","sortBy","setSortBy","sortOrder","setSortOrder","fetchQuizResults","handleLiveResult","newResult","toString","prevResults","exists","some","r","id","off","response","get","sortedResults","sort","a","b","aVal","bVal","statsMap","Map","answerStatistics","forEach","stat","has","question_id","set","questionId","questionText","question_text","questionOrder","question_order","options","push","optionId","option_id","optionText","option_text","isCorrect","is_correct","selectionCount","selection_count","percentage","Array","from","values","err","_err$response","_err$response$data","message","exportToCSV","csvData","map","result","first_name","last_name","username","total_score","max_score","time_taken_minutes","Date","started_at","toLocaleString","submitted_at","length","alert","headers","Object","keys","csvContent","join","row","field","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","toISOString","slice","style","visibility","body","appendChild","click","removeChild","formatDate","dateString","getGradeBadgeClass","calculateOverallStats","totalStudents","averageScore","reduce","sum","highestScore","Math","max","lowestScore","min","passRate","filter","round","stats","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","title","totalSubmissions","onClick","disabled","value","onChange","e","target","question","option","height","width","_c","$RefreshReg$"],"sources":["C:/Users/rohit/OneDrive/Desktop/MS OCU/MS Project 2/Quiz-Poll/frontend/src/components/professor/QuizResults.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport api from '../../services/api';\n// import socket from '../../services/socket';\nimport { io } from 'socket.io-client';\n\nconst socket = io(import.meta.env.VITE_BACKEND_URL);\nsocket.on('quiz_result', (data) => {\n    console.log('New quiz result received:', data);\n    // Optionally trigger a refresh or update your quiz results state here\n});\nconst QuizResults = () => {\n    const { quizId } = useParams();\n    const { user } = useAuth();\n    const [quiz, setQuiz] = useState(null);\n    const [results, setResults] = useState([]);\n    const [answerStats, setAnswerStats] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    const [sortBy, setSortBy] = useState('submitted_at');\n    const [sortOrder, setSortOrder] = useState('DESC');\n\n    useEffect(() => {\n        if (quizId) {\n            fetchQuizResults();\n        }\n    }, [quizId, sortBy, sortOrder]);\n\n    useEffect(() => {\n        const handleLiveResult = (newResult) => {\n            if (newResult.quizId.toString() !== quizId.toString()) return;\n\n            console.log('Live result received:', newResult);\n\n            setResults(prevResults => {\n                const exists = prevResults.some(r => r.id === newResult.id);\n                if (exists) return prevResults; // Avoid duplicates\n                return [newResult, ...prevResults];\n            });\n        };\n\n        socket.on('quiz_result', handleLiveResult);\n\n        return () => {\n            socket.off('quiz_result', handleLiveResult);\n        };\n    }, [quizId]);\n\n    const fetchQuizResults = async () => {\n        try {\n            setLoading(true);\n            const response = await api.get(`/quizzes/${quizId}/results`);\n            setQuiz(response.data.quiz);\n\n            const sortedResults = response.data.results.sort((a, b) => {\n                const aVal = a[sortBy];\n                const bVal = b[sortBy];\n                return sortOrder === 'ASC' ? (aVal > bVal ? 1 : -1) : (aVal < bVal ? 1 : -1);\n            });\n\n            setResults(sortedResults);\n\n            const statsMap = new Map();\n            response.data.answerStatistics.forEach(stat => {\n                if (!statsMap.has(stat.question_id)) {\n                    statsMap.set(stat.question_id, {\n                        questionId: stat.question_id,\n                        questionText: stat.question_text,\n                        questionOrder: stat.question_order,\n                        options: []\n                    });\n                }\n\n                statsMap.get(stat.question_id).options.push({\n                    optionId: stat.option_id,\n                    optionText: stat.option_text,\n                    isCorrect: stat.is_correct,\n                    selectionCount: stat.selection_count,\n                    percentage: stat.percentage\n                });\n            });\n\n            setAnswerStats(Array.from(statsMap.values()).sort((a, b) => a.questionOrder - b.questionOrder));\n            setError('');\n        } catch (err) {\n            console.error('QuizResults - Error fetching results:', err);\n            setError(err.response?.data?.message || 'Failed to fetch quiz results');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const exportToCSV = async () => {\n        try {\n            const csvData = results.map(result => ({\n                'Student Name': `${result.first_name} ${result.last_name}`,\n                'Username': result.username,\n                'Score': result.total_score,\n                'Max Score': result.max_score,\n                'Percentage': result.percentage,\n                'Time Taken (minutes)': result.time_taken_minutes,\n                'Started At': new Date(result.started_at).toLocaleString(),\n                'Submitted At': new Date(result.submitted_at).toLocaleString()\n            }));\n\n            if (csvData.length === 0) {\n                alert('No data to export');\n                return;\n            }\n\n            const headers = Object.keys(csvData[0]);\n            const csvContent = [\n                headers.join(','),\n                ...csvData.map(row => headers.map(field => `\"${row[field]}\"`).join(','))\n            ].join('\\n');\n\n            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n            const link = document.createElement('a');\n            const url = URL.createObjectURL(blob);\n            link.setAttribute('href', url);\n            link.setAttribute('download', `quiz_${quizId}_results_${new Date().toISOString().slice(0, 10)}.csv`);\n            link.style.visibility = 'hidden';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n\n            alert('Results exported successfully!');\n        } catch (err) {\n            console.error('QuizResults - Error exporting CSV:', err);\n            alert('Failed to export results');\n        }\n    };\n\n    const formatDate = (dateString) => new Date(dateString).toLocaleString();\n\n    const getGradeBadgeClass = (percentage) => {\n        if (percentage >= 90) return 'bg-success';\n        if (percentage >= 80) return 'bg-info';\n        if (percentage >= 70) return 'bg-warning';\n        if (percentage >= 60) return 'bg-orange';\n        return 'bg-danger';\n    };\n\n    const calculateOverallStats = () => {\n        if (results.length === 0) return null;\n        const totalStudents = results.length;\n        const averageScore = results.reduce((sum, result) => sum + result.percentage, 0) / totalStudents;\n        const highestScore = Math.max(...results.map(r => r.percentage));\n        const lowestScore = Math.min(...results.map(r => r.percentage));\n        const passRate = results.filter(r => r.percentage >= 60).length / totalStudents * 100;\n\n        return {\n            totalStudents,\n            averageScore: Math.round(averageScore),\n            highestScore,\n            lowestScore,\n            passRate: Math.round(passRate)\n        };\n    };\n\n    const stats = calculateOverallStats();\n\n    if (loading) {\n        return <div className=\"container mt-4 text-center\"><div className=\"spinner-border text-primary\" role=\"status\"></div></div>;\n    }\n\n    if (!quiz) {\n        return <div className=\"container mt-4 alert alert-danger\">Quiz not found or you don't have permission to view its results.</div>;\n    }\n\n    return (\n        <div className=\"container mt-4\">\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                <div>\n                    <h2>{quiz.title} - Results</h2>\n                    <p className=\"text-muted mb-0\">Total Submissions: {quiz.totalSubmissions}</p>\n                </div>\n                <div>\n                    <button className=\"btn btn-success me-2\" onClick={exportToCSV} disabled={results.length === 0}>\n                        <i className=\"fas fa-download me-2\"></i>Export CSV\n                    </button>\n                    <button className=\"btn btn-primary\" onClick={fetchQuizResults}>\n                        <i className=\"fas fa-sync-alt me-2\"></i>Refresh\n                    </button>\n                </div>\n            </div>\n\n            {error && <div className=\"alert alert-danger\">{error}</div>}\n\n            {stats && (\n                <div className=\"row mb-4\">\n                    <div className=\"col-md-2 mb-3\"><div className=\"card text-center\"><div className=\"card-body\"><h5 className=\"card-title text-primary\">{stats.totalStudents}</h5><p className=\"card-text small\">Total Students</p></div></div></div>\n                    <div className=\"col-md-2 mb-3\"><div className=\"card text-center\"><div className=\"card-body\"><h5 className=\"card-title text-info\">{stats.averageScore}%</h5><p className=\"card-text small\">Average Score</p></div></div></div>\n                    <div className=\"col-md-2 mb-3\"><div className=\"card text-center\"><div className=\"card-body\"><h5 className=\"card-title text-success\">{stats.highestScore}%</h5><p className=\"card-text small\">Highest Score</p></div></div></div>\n                    <div className=\"col-md-2 mb-3\"><div className=\"card text-center\"><div className=\"card-body\"><h5 className=\"card-title text-danger\">{stats.lowestScore}%</h5><p className=\"card-text small\">Lowest Score</p></div></div></div>\n                    <div className=\"col-md-2 mb-3\"><div className=\"card text-center\"><div className=\"card-body\"><h5 className=\"card-title text-warning\">{stats.passRate}%</h5><p className=\"card-text small\">Pass Rate (≥60%)</p></div></div></div>\n                </div>\n            )}\n\n            <div className=\"card mb-4\">\n                <div className=\"card-header d-flex justify-content-between align-items-center\">\n                    <h5 className=\"mb-0\">Student Results</h5>\n                    <div className=\"d-flex\">\n                        <select className=\"form-select form-select-sm me-2\" value={sortBy} onChange={(e) => setSortBy(e.target.value)}>\n                            <option value=\"submitted_at\">Submission Date</option>\n                            <option value=\"percentage\">Score %</option>\n                            <option value=\"total_score\">Score Points</option>\n                            <option value=\"time_taken_minutes\">Time Taken</option>\n                            <option value=\"last_name\">Student Name</option>\n                        </select>\n                        <select className=\"form-select form-select-sm\" value={sortOrder} onChange={(e) => setSortOrder(e.target.value)}>\n                            <option value=\"DESC\">Descending</option>\n                            <option value=\"ASC\">Ascending</option>\n                        </select>\n                    </div>\n                </div>\n                <div className=\"card-body\">\n                    {results.length === 0 ? (\n                        <p className=\"text-muted text-center\">No submissions yet for this quiz.</p>\n                    ) : (\n                        <div className=\"table-responsive\">\n                            <table className=\"table table-striped\">\n                                <thead>\n                                    <tr>\n                                        <th>Student</th>\n                                        <th>Score</th>\n                                        <th>Grade</th>\n                                        <th>Time Taken</th>\n                                        <th>Submitted At</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {results.map(result => (\n                                        <tr key={result.id}>\n                                            <td><strong>{result.first_name} {result.last_name}</strong><br /><small>{result.username}</small></td>\n                                            <td>{result.total_score}/{result.max_score}</td>\n                                            <td><span className={`badge ${getGradeBadgeClass(result.percentage)}`}>{result.percentage}%</span></td>\n                                            <td>{result.time_taken_minutes} min</td>\n                                            <td>{formatDate(result.submitted_at)}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {answerStats.length > 0 && (\n                <div className=\"card\">\n                    <div className=\"card-header\"><h5>Question Analysis & Poll Results</h5></div>\n                    <div className=\"card-body\">\n                        {answerStats.map(question => (\n                            <div key={question.questionId} className=\"mb-4\">\n                                <h6><strong>Question {question.questionOrder}:</strong> {question.questionText}</h6>\n                                <div className=\"row\">\n                                    {question.options.map(option => (\n                                        <div key={option.optionId} className=\"col-md-6 mb-2\">\n                                            <div className={`card ${option.isCorrect ? 'border-success' : ''}`}>\n                                                <div className=\"card-body py-2\">\n                                                    <div className=\"d-flex justify-content-between align-items-center\">\n                                                        <small>{option.isCorrect && <i className=\"fas fa-check text-success me-1\"></i>}{option.optionText}</small>\n                                                        <div className=\"text-end\">\n                                                            <strong>{option.selectionCount} votes</strong><br />\n                                                            <small>{option.percentage}%</small>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"progress mt-1\" style={{ height: '4px' }}>\n                                                        <div className={`progress-bar ${option.isCorrect ? 'bg-success' : 'bg-primary'}`} style={{ width: `${option.percentage}%` }}></div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default QuizResults;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}