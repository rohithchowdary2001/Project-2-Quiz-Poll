{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rohit\\\\OneDrive\\\\Desktop\\\\MS OCU\\\\MS Project 2\\\\Quiz-Poll\\\\frontend\\\\src\\\\components\\\\student\\\\QuizTaking.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport api from '../../services/api';\nimport socketService from '../../services/socket';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QuizTaking = () => {\n  _s();\n  const {\n    quizId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [quiz, setQuiz] = useState(null);\n  const [submission, setSubmission] = useState(null);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [questionTimeLeft, setQuestionTimeLeft] = useState(0); // per-question timer only\n  const questionTimerRef = useRef();\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [showConfirmSubmit, setShowConfirmSubmit] = useState(false);\n\n  // Refs to maintain current state for timer callbacks\n  const currentQuestionIndexRef = useRef(currentQuestionIndex);\n  const answersRef = useRef(answers);\n  const submissionRef = useRef(submission);\n  const quizRef = useRef(quiz);\n\n  // Update refs when state changes\n  useEffect(() => {\n    currentQuestionIndexRef.current = currentQuestionIndex;\n  }, [currentQuestionIndex]);\n  useEffect(() => {\n    answersRef.current = answers;\n  }, [answers]);\n  useEffect(() => {\n    submissionRef.current = submission;\n  }, [submission]);\n  useEffect(() => {\n    quizRef.current = quiz;\n  }, [quiz]);\n  useEffect(() => {\n    if (quizId) {\n      startQuiz();\n    }\n\n    // Connect and authenticate socket\n    if (user) {\n      socketService.authenticate(user);\n    }\n\n    // Join quiz room for real-time updates\n    socketService.joinQuizRoom(quizId);\n\n    // Add socket connection logging\n    socketService.on('connect', () => {\n      console.log('üîå Socket connected in QuizTaking:', socketService.id);\n    });\n    socketService.on('disconnect', () => {\n      console.log('‚ùå Socket disconnected in QuizTaking');\n    });\n    socketService.on('connect_error', error => {\n      console.error('‚ùå Socket connection error in QuizTaking:', error);\n    });\n\n    // Listen for quiz deactivation while taking\n    socketService.on('quizDeactivated', data => {\n      if (data.quizId === parseInt(quizId)) {\n        console.log('‚ö†Ô∏è Quiz deactivated while taking:', data);\n        alert('This quiz has been deactivated by the instructor.');\n        navigate('/dashboard');\n      }\n    });\n    return () => {\n      socketService.leaveQuizRoom(quizId);\n      socketService.off('connect');\n      socketService.off('disconnect');\n      socketService.off('connect_error');\n      socketService.off('quizDeactivated');\n    };\n  }, [quizId, user, navigate]);\n\n  // Per-question timer effect\n  useEffect(() => {\n    if (!quiz || !quiz.questions || !quiz.questions[currentQuestionIndex]) return;\n    const currentQuestion = quiz.questions[currentQuestionIndex];\n    const timeLimit = currentQuestion.questionTimeLimit || 30; // Use camelCase field name\n    console.log('Setting up timer for question:', currentQuestion.id, 'Time limit:', timeLimit, 'seconds');\n    console.log('Question data:', currentQuestion); // Debug: show full question data\n    setQuestionTimeLeft(timeLimit);\n    if (questionTimerRef.current) clearInterval(questionTimerRef.current);\n    questionTimerRef.current = setInterval(() => {\n      setQuestionTimeLeft(prev => {\n        const newTime = prev - 1;\n        console.log('Question timer tick - Time left:', newTime, 'seconds for question:', currentQuestion.id);\n        if (newTime <= 0) {\n          console.log('‚è∞ TIMER EXPIRED! Calling handleTimeExpired for question:', currentQuestion.id);\n          clearInterval(questionTimerRef.current);\n          // Auto-move to next question or submit quiz\n          handleTimeExpired();\n          return 0;\n        }\n        return newTime;\n      });\n    }, 1000);\n    return () => {\n      if (questionTimerRef.current) {\n        console.log('Cleaning up timer for question:', currentQuestion.id);\n        clearInterval(questionTimerRef.current);\n      }\n    };\n  }, [currentQuestionIndex, quiz]);\n  const startQuiz = async () => {\n    try {\n      setLoading(true);\n      const startResponse = await api.post('/submissions/start', {\n        quizId\n      });\n      setSubmission(startResponse.data.submission);\n      const quizResponse = await api.get(`/quizzes/${quizId}`);\n      setQuiz(quizResponse.data.quiz);\n      setError('');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to start quiz');\n      setTimeout(() => {\n        navigate('/student/quizzes');\n      }, 3000);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleTimeExpired = useCallback(async () => {\n    console.log('üö® Timer expired! Getting current state from refs...');\n\n    // Use refs to get current state (avoiding stale closure)\n    const currentQuestionIdx = currentQuestionIndexRef.current;\n    const currentAnswers = answersRef.current;\n    const currentSubmission = submissionRef.current;\n    const currentQuiz = quizRef.current;\n    if (!currentQuiz || !currentQuiz.questions || !currentQuiz.questions[currentQuestionIdx]) {\n      console.log('No current question found, quiz:', !!currentQuiz, 'questions:', !!(currentQuiz !== null && currentQuiz !== void 0 && currentQuiz.questions), 'index:', currentQuestionIdx);\n      return;\n    }\n    const currentQuestion = currentQuiz.questions[currentQuestionIdx];\n    const answer = currentAnswers[currentQuestion.id];\n    console.log('Timer expired! Current question:', currentQuestion.id, 'Answer:', answer, 'Type:', typeof answer);\n    console.log('Current answers state:', currentAnswers);\n    console.log('Current question index:', currentQuestionIdx);\n\n    // Submit current answer if it exists (check for valid option ID)\n    if (currentSubmission && answer != null && answer !== undefined) {\n      try {\n        console.log('Auto-submitting answer on time expiry for question:', currentQuestion.id, 'answer:', answer);\n        const response = await api.post('/submissions/answer', {\n          submissionId: currentSubmission.id,\n          questionId: currentQuestion.id,\n          selectedOptionId: answer\n        });\n        console.log('‚úÖ Auto-submitted answer successfully for question:', currentQuestion.id, 'Response:', response.data);\n      } catch (err) {\n        var _err$response2;\n        console.error('‚ùå Failed to auto-submit answer:', ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err.message);\n      }\n    } else {\n      console.log('‚ö†Ô∏è No answer to auto-submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\n    }\n\n    // Small delay to ensure submission is processed\n    await new Promise(resolve => setTimeout(resolve, 200));\n\n    // Move to next question or complete quiz\n    if (currentQuestionIdx === currentQuiz.questions.length - 1) {\n      // Last question - auto-submit quiz and navigate to results\n      console.log('üèÅ Time expired on last question, completing quiz and navigating to results');\n      try {\n        const response = await api.post('/submissions/complete', {\n          submissionId: currentSubmission.id\n        });\n        console.log('‚úÖ Quiz auto-completed successfully!', response.data);\n\n        // Navigate to results page\n        const resultsUrl = `/student/quiz-results/${currentSubmission.id}`;\n        console.log('üîÑ Auto-navigating to results page:', resultsUrl);\n        navigate(resultsUrl, {\n          replace: true\n        });\n      } catch (err) {\n        console.error('‚ùå Failed to auto-complete quiz:', err);\n        // Even if completion fails, try to navigate to results\n        navigate(`/student/quiz-results/${currentSubmission.id}`, {\n          replace: true\n        });\n      }\n    } else {\n      // Move to next question\n      console.log('‚è≠Ô∏è Time expired, moving to next question:', currentQuestionIdx + 1);\n      setCurrentQuestionIndex(currentQuestionIdx + 1);\n    }\n  }, []); // Empty dependency array since we're using refs\n\n  const handleAnswerSelect = async (questionId, optionId) => {\n    // Just update local state - don't submit to server yet\n    const newAnswers = {\n      ...answers,\n      [questionId]: optionId\n    };\n    setAnswers(newAnswers);\n    console.log('Answer selected locally for question:', questionId, 'option:', optionId, 'type:', typeof optionId);\n    console.log('Updated answers state:', newAnswers);\n  };\n  const handleNextQuestion = async () => {\n    const currentQuestion = quiz.questions[currentQuestionIndex];\n    const answer = answers[currentQuestion.id];\n    console.log('Next button clicked. Current question:', currentQuestion.id, 'Answer:', answer, 'Type:', typeof answer);\n\n    // Submit the answer when moving to next question\n    if (submission && answer != null && answer !== undefined) {\n      try {\n        console.log('Submitting answer when moving to next question:', currentQuestion.id, 'answer:', answer);\n        await api.post('/submissions/answer', {\n          submissionId: submission.id,\n          questionId: currentQuestion.id,\n          selectedOptionId: answer\n        });\n        console.log('Answer submitted successfully for question:', currentQuestion.id);\n      } catch (err) {\n        var _err$response3, _err$response3$data;\n        console.error('Failed to submit answer:', err);\n        setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Failed to submit answer');\n        return; // Don't move to next question if submission failed\n      }\n    } else {\n      console.log('No answer to submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\n    }\n\n    // Move to next question\n    if (currentQuestionIndex < quiz.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    }\n  };\n  const handlePreviousQuestion = async () => {\n    const currentQuestion = quiz.questions[currentQuestionIndex];\n    const answer = answers[currentQuestion.id];\n    console.log('Previous button clicked. Current question:', currentQuestion.id, 'Answer:', answer, 'Type:', typeof answer);\n\n    // Submit the current question's answer before going back\n    if (submission && answer != null && answer !== undefined) {\n      try {\n        console.log('Submitting answer before going to previous question:', currentQuestion.id);\n        await api.post('/submissions/answer', {\n          submissionId: submission.id,\n          questionId: currentQuestion.id,\n          selectedOptionId: answer\n        });\n        console.log('Answer submitted successfully before going back');\n      } catch (err) {\n        var _err$response4, _err$response4$data;\n        console.error('Failed to submit answer before going back:', err);\n        setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || 'Failed to submit answer');\n      }\n    } else {\n      console.log('No answer to submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\n    }\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\n    }\n  };\n  const handleQuestionJump = async index => {\n    const currentQuestion = quiz.questions[currentQuestionIndex];\n    const answer = answers[currentQuestion.id];\n\n    // Submit the current question's answer before jumping\n    if (submission && answer !== undefined && answer !== '') {\n      try {\n        console.log('Submitting answer before jumping from question:', currentQuestion.id, 'to question:', index + 1);\n        await api.post('/submissions/answer', {\n          submissionId: submission.id,\n          questionId: currentQuestion.id,\n          selectedOptionId: answer\n        });\n        console.log('Answer submitted successfully before jumping');\n      } catch (err) {\n        var _err$response5, _err$response5$data;\n        console.error('Failed to submit answer before jumping:', err);\n        setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.message) || 'Failed to submit answer');\n      }\n    }\n    setCurrentQuestionIndex(index);\n  };\n  const handleCompleteQuiz = async (skipFinalAnswerSubmission = false) => {\n    try {\n      setSubmitting(true);\n\n      // Always submit the current question's answer before completing the quiz\n      if (quiz && quiz.questions && quiz.questions[currentQuestionIndex]) {\n        const currentQuestion = quiz.questions[currentQuestionIndex];\n        const answer = answers[currentQuestion.id];\n        console.log('Before completing quiz - submitting final answer for question:', currentQuestion.id, 'answer:', answer);\n        if (submission && answer != null && answer !== undefined) {\n          try {\n            console.log('Submitting final answer before quiz completion:', currentQuestion.id, 'answer:', answer);\n            await api.post('/submissions/answer', {\n              submissionId: submission.id,\n              questionId: currentQuestion.id,\n              selectedOptionId: answer\n            });\n            console.log('‚úÖ Final answer submitted successfully for question:', currentQuestion.id);\n          } catch (err) {\n            console.error('‚ùå Failed to submit final answer:', err);\n            // Continue with quiz completion even if final answer submission fails\n          }\n        } else {\n          console.log('‚ö†Ô∏è No final answer to submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\n        }\n      }\n\n      // Small delay to ensure answer is processed\n      await new Promise(resolve => setTimeout(resolve, 500));\n      console.log('üèÅ Completing quiz with submission ID:', submission.id);\n      const response = await api.post('/submissions/complete', {\n        submissionId: submission.id\n      });\n      console.log('‚úÖ Quiz completed successfully!', response.data);\n\n      // Navigate to results page\n      const resultsUrl = `/student/quiz-results/${submission.id}`;\n      console.log('üîÑ Navigating to results page:', resultsUrl);\n      navigate(resultsUrl, {\n        replace: true\n      });\n    } catch (err) {\n      var _err$response6, _err$response7, _err$response8, _err$response8$data, _err$response9;\n      console.error('‚ùå Failed to complete quiz:', err);\n      console.error('‚ùå Error response:', err.response);\n      console.error('‚ùå Error status:', (_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : _err$response6.status);\n      console.error('‚ùå Error data:', (_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : _err$response7.data);\n\n      // Show more detailed error information\n      const errorMessage = ((_err$response8 = err.response) === null || _err$response8 === void 0 ? void 0 : (_err$response8$data = _err$response8.data) === null || _err$response8$data === void 0 ? void 0 : _err$response8$data.message) || err.message || 'Failed to complete quiz';\n      setError(`Failed to complete quiz: ${errorMessage}`);\n\n      // If it's a server error, still try to navigate to results\n      if (((_err$response9 = err.response) === null || _err$response9 === void 0 ? void 0 : _err$response9.status) >= 500) {\n        console.log('üîÑ Server error occurred, but attempting to navigate to results anyway');\n        navigate(`/student/quiz-results/${submission.id}`, {\n          replace: true\n        });\n      }\n    } finally {\n      setSubmitting(false);\n      setShowConfirmSubmit(false);\n    }\n  };\n  const calculateProgress = () => {\n    if (!quiz) return 0;\n    const answered = Object.keys(answers).length;\n    return Math.round(answered / quiz.questions.length * 100);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center align-items-center min-vh-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-primary mb-3\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"visually-hidden\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Starting your quiz...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 13\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-exclamation-triangle me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 21\n        }, this), error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate('/student/quizzes'),\n        children: \"Back to Quizzes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 13\n    }, this);\n  }\n  if (!quiz || !submission) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-exclamation-triangle me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 21\n        }, this), \"Quiz not found or not accessible.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 13\n    }, this);\n  }\n  const currentQuestion = quiz.questions[currentQuestionIndex];\n  const progress = calculateProgress();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"mb-0\",\n                  children: quiz.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: quiz.class_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4 text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h4 mb-0\",\n                  children: [\"Question \", currentQuestionIndex + 1, \" of \", quiz.questions.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress-bar\",\n                    style: {\n                      width: `${progress}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 450,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: [progress, \"% completed\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4 text-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h4 mb-0 text-warning\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-stopwatch me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 41\n                  }, this), \"Time left: \", questionTimeLeft, \"s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: \"Auto-moves when time expires\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card sticky-top\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"mb-0\",\n              children: \"Question Navigation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row g-2\",\n              children: quiz.questions.map((question, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-4\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn btn-sm w-100 ${index === currentQuestionIndex ? 'btn-primary' : answers[question.id] ? 'btn-success' : 'btn-outline-secondary'}`,\n                  onClick: () => handleQuestionJump(index),\n                  children: index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 41\n                }, this)\n              }, question.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 small\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"btn btn-sm btn-success me-2\",\n                  style: {\n                    width: '20px',\n                    height: '20px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Answered\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"btn btn-sm btn-primary me-2\",\n                  style: {\n                    width: '20px',\n                    height: '20px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 503,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Current\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"btn btn-sm btn-outline-secondary me-2\",\n                  style: {\n                    width: '20px',\n                    height: '20px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Not answered\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-9\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"mb-0\",\n              children: [\"Question \", currentQuestionIndex + 1]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: currentQuestion.questionText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-muted\",\n                children: [\"Points: \", currentQuestion.points, \" | Type: \", currentQuestion.questionType.replace('_', ' ')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: currentQuestion.options.map((option, optionIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-check mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-check-input\",\n                  type: \"radio\",\n                  name: `question_${currentQuestion.id}`,\n                  id: `option_${option.id}`,\n                  checked: answers[currentQuestion.id] === option.id,\n                  onChange: () => handleAnswerSelect(currentQuestion.id, option.id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-check-label\",\n                  htmlFor: `option_${option.id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"badge bg-light text-dark me-2\",\n                    children: String.fromCharCode(65 + optionIndex)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 542,\n                    columnNumber: 45\n                  }, this), option.text]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 41\n                }, this)]\n              }, option.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-secondary\",\n                onClick: handlePreviousQuestion,\n                disabled: currentQuestionIndex === 0,\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-chevron-left me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 37\n                }, this), \"Previous\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: [Object.keys(answers).length, \" of \", quiz.questions.length, \" questions answered\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-warning btn-sm mt-1\",\n                  onClick: () => {\n                    console.log('üß™ TEST: Manually triggering timer expiry');\n                    handleTimeExpired();\n                  },\n                  style: {\n                    fontSize: '11px'\n                  },\n                  children: \"Test Timer Expiry\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 33\n              }, this), currentQuestionIndex === quiz.questions.length - 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => setShowConfirmSubmit(true),\n                disabled: submitting,\n                children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-border spinner-border-sm me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 588,\n                    columnNumber: 49\n                  }, this), \"Submitting...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-check me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 593,\n                    columnNumber: 49\n                  }, this), \"Submit Quiz\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: handleNextQuestion,\n                children: [\"Next\", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-chevron-right ms-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 13\n    }, this), showConfirmSubmit && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal fade show\",\n      style: {\n        display: 'block',\n        backgroundColor: 'rgba(0,0,0,0.5)'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-dialog\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"modal-title\",\n              children: \"Submit Quiz\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-close\",\n              onClick: () => setShowConfirmSubmit(false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Are you sure you want to submit your quiz?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-info\",\n              children: /*#__PURE__*/_jsxDEV(\"small\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Summary:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 66\n                }, this), \"\\u2022 Questions answered: \", Object.keys(answers).length, \" of \", quiz.questions.length, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 119\n                }, this), \"\\u2022 Unanswered questions: \", quiz.questions.length - Object.keys(answers).length, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 118\n                }, this), \"\\u2022 Current question time: \", questionTimeLeft, \"s remaining\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-warning\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-exclamation-triangle me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Warning:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 37\n              }, this), \" Once submitted, you cannot change your answers.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary\",\n              onClick: () => setShowConfirmSubmit(false),\n              children: \"Continue Quiz\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 638,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-success\",\n              onClick: handleCompleteQuiz,\n              disabled: submitting,\n              children: submitting ? 'Submitting...' : 'Submit Quiz'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 434,\n    columnNumber: 9\n  }, this);\n};\n_s(QuizTaking, \"rDh3d1CQUGAtBu6LupQ7sMvwqmY=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = QuizTaking;\nexport default QuizTaking;\nvar _c;\n$RefreshReg$(_c, \"QuizTaking\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useNavigate","useAuth","api","socketService","jsxDEV","_jsxDEV","Fragment","_Fragment","QuizTaking","_s","quizId","navigate","user","quiz","setQuiz","submission","setSubmission","currentQuestionIndex","setCurrentQuestionIndex","answers","setAnswers","questionTimeLeft","setQuestionTimeLeft","questionTimerRef","loading","setLoading","submitting","setSubmitting","error","setError","showConfirmSubmit","setShowConfirmSubmit","currentQuestionIndexRef","answersRef","submissionRef","quizRef","current","startQuiz","authenticate","joinQuizRoom","on","console","log","id","data","parseInt","alert","leaveQuizRoom","off","questions","currentQuestion","timeLimit","questionTimeLimit","clearInterval","setInterval","prev","newTime","handleTimeExpired","startResponse","post","quizResponse","get","err","_err$response","_err$response$data","response","message","setTimeout","currentQuestionIdx","currentAnswers","currentSubmission","currentQuiz","answer","undefined","submissionId","questionId","selectedOptionId","_err$response2","Promise","resolve","length","resultsUrl","replace","handleAnswerSelect","optionId","newAnswers","handleNextQuestion","_err$response3","_err$response3$data","handlePreviousQuestion","_err$response4","_err$response4$data","handleQuestionJump","index","_err$response5","_err$response5$data","handleCompleteQuiz","skipFinalAnswerSubmission","_err$response6","_err$response7","_err$response8","_err$response8$data","_err$response9","status","errorMessage","calculateProgress","answered","Object","keys","Math","round","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","onClick","progress","title","class_name","style","width","map","question","height","questionText","points","questionType","options","option","optionIndex","type","name","checked","onChange","htmlFor","String","fromCharCode","text","disabled","fontSize","display","backgroundColor","_c","$RefreshReg$"],"sources":["C:/Users/rohit/OneDrive/Desktop/MS OCU/MS Project 2/Quiz-Poll/frontend/src/components/student/QuizTaking.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport api from '../../services/api';\r\nimport socketService from '../../services/socket';\r\n\r\nconst QuizTaking = () => {\r\n    const { quizId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { user } = useAuth();\r\n    const [quiz, setQuiz] = useState(null);\r\n    const [submission, setSubmission] = useState(null);\r\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n    const [answers, setAnswers] = useState({});\r\n    const [questionTimeLeft, setQuestionTimeLeft] = useState(0); // per-question timer only\r\n    const questionTimerRef = useRef();\r\n    const [loading, setLoading] = useState(true);\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [showConfirmSubmit, setShowConfirmSubmit] = useState(false);\r\n\r\n    // Refs to maintain current state for timer callbacks\r\n    const currentQuestionIndexRef = useRef(currentQuestionIndex);\r\n    const answersRef = useRef(answers);\r\n    const submissionRef = useRef(submission);\r\n    const quizRef = useRef(quiz);\r\n\r\n    // Update refs when state changes\r\n    useEffect(() => {\r\n        currentQuestionIndexRef.current = currentQuestionIndex;\r\n    }, [currentQuestionIndex]);\r\n\r\n    useEffect(() => {\r\n        answersRef.current = answers;\r\n    }, [answers]);\r\n\r\n    useEffect(() => {\r\n        submissionRef.current = submission;\r\n    }, [submission]);\r\n\r\n    useEffect(() => {\r\n        quizRef.current = quiz;\r\n    }, [quiz]);\r\n\r\n    useEffect(() => {\r\n        if (quizId) {\r\n            startQuiz();\r\n        }\r\n        \r\n        // Connect and authenticate socket\r\n        if (user) {\r\n            socketService.authenticate(user);\r\n        }\r\n        \r\n        // Join quiz room for real-time updates\r\n        socketService.joinQuizRoom(quizId);\r\n        \r\n        // Add socket connection logging\r\n        socketService.on('connect', () => {\r\n            console.log('üîå Socket connected in QuizTaking:', socketService.id);\r\n        });\r\n        \r\n        socketService.on('disconnect', () => {\r\n            console.log('‚ùå Socket disconnected in QuizTaking');\r\n        });\r\n        \r\n        socketService.on('connect_error', (error) => {\r\n            console.error('‚ùå Socket connection error in QuizTaking:', error);\r\n        });\r\n\r\n        // Listen for quiz deactivation while taking\r\n        socketService.on('quizDeactivated', (data) => {\r\n            if (data.quizId === parseInt(quizId)) {\r\n                console.log('‚ö†Ô∏è Quiz deactivated while taking:', data);\r\n                alert('This quiz has been deactivated by the instructor.');\r\n                navigate('/dashboard');\r\n            }\r\n        });\r\n        \r\n        return () => {\r\n            socketService.leaveQuizRoom(quizId);\r\n            socketService.off('connect');\r\n            socketService.off('disconnect');\r\n            socketService.off('connect_error');\r\n            socketService.off('quizDeactivated');\r\n        };\r\n    }, [quizId, user, navigate]);\r\n\r\n    // Per-question timer effect\r\n  useEffect(() => {\r\n    if (!quiz || !quiz.questions || !quiz.questions[currentQuestionIndex]) return;\r\n\r\n    const currentQuestion = quiz.questions[currentQuestionIndex];\r\n    const timeLimit = currentQuestion.questionTimeLimit || 30; // Use camelCase field name\r\n    console.log('Setting up timer for question:', currentQuestion.id, 'Time limit:', timeLimit, 'seconds');\r\n    console.log('Question data:', currentQuestion); // Debug: show full question data\r\n    setQuestionTimeLeft(timeLimit);\r\n\r\n    if (questionTimerRef.current) clearInterval(questionTimerRef.current);\r\n\r\n    questionTimerRef.current = setInterval(() => {\r\n        setQuestionTimeLeft(prev => {\r\n            const newTime = prev - 1;\r\n            console.log('Question timer tick - Time left:', newTime, 'seconds for question:', currentQuestion.id);\r\n            \r\n            if (newTime <= 0) {\r\n                console.log('‚è∞ TIMER EXPIRED! Calling handleTimeExpired for question:', currentQuestion.id);\r\n                clearInterval(questionTimerRef.current);\r\n                // Auto-move to next question or submit quiz\r\n                handleTimeExpired();\r\n                return 0;\r\n            }\r\n            return newTime;\r\n        });\r\n    }, 1000);\r\n\r\n    return () => {\r\n        if (questionTimerRef.current) {\r\n            console.log('Cleaning up timer for question:', currentQuestion.id);\r\n            clearInterval(questionTimerRef.current);\r\n        }\r\n    };\r\n}, [currentQuestionIndex, quiz]);\r\n\r\n    const startQuiz = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const startResponse = await api.post('/submissions/start', { quizId });\r\n            setSubmission(startResponse.data.submission);\r\n            const quizResponse = await api.get(`/quizzes/${quizId}`);\r\n            setQuiz(quizResponse.data.quiz);\r\n            setError('');\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'Failed to start quiz');\r\n            setTimeout(() => {\r\n                navigate('/student/quizzes');\r\n            }, 3000);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleTimeExpired = useCallback(async () => {\r\n        console.log('üö® Timer expired! Getting current state from refs...');\r\n        \r\n        // Use refs to get current state (avoiding stale closure)\r\n        const currentQuestionIdx = currentQuestionIndexRef.current;\r\n        const currentAnswers = answersRef.current;\r\n        const currentSubmission = submissionRef.current;\r\n        const currentQuiz = quizRef.current;\r\n        \r\n        if (!currentQuiz || !currentQuiz.questions || !currentQuiz.questions[currentQuestionIdx]) {\r\n            console.log('No current question found, quiz:', !!currentQuiz, 'questions:', !!currentQuiz?.questions, 'index:', currentQuestionIdx);\r\n            return;\r\n        }\r\n        \r\n        const currentQuestion = currentQuiz.questions[currentQuestionIdx];\r\n        const answer = currentAnswers[currentQuestion.id];\r\n\r\n        console.log('Timer expired! Current question:', currentQuestion.id, 'Answer:', answer, 'Type:', typeof answer);\r\n        console.log('Current answers state:', currentAnswers);\r\n        console.log('Current question index:', currentQuestionIdx);\r\n\r\n        // Submit current answer if it exists (check for valid option ID)\r\n        if (currentSubmission && answer != null && answer !== undefined) {\r\n            try {\r\n                console.log('Auto-submitting answer on time expiry for question:', currentQuestion.id, 'answer:', answer);\r\n                \r\n                const response = await api.post('/submissions/answer', {\r\n                    submissionId: currentSubmission.id,\r\n                    questionId: currentQuestion.id,\r\n                    selectedOptionId: answer\r\n                });\r\n                \r\n                console.log('‚úÖ Auto-submitted answer successfully for question:', currentQuestion.id, 'Response:', response.data);\r\n            } catch (err) {\r\n                console.error('‚ùå Failed to auto-submit answer:', err.response?.data || err.message);\r\n            }\r\n        } else {\r\n            console.log('‚ö†Ô∏è No answer to auto-submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\r\n        }\r\n\r\n        // Small delay to ensure submission is processed\r\n        await new Promise(resolve => setTimeout(resolve, 200));\r\n\r\n        // Move to next question or complete quiz\r\n        if (currentQuestionIdx === currentQuiz.questions.length - 1) {\r\n            // Last question - auto-submit quiz and navigate to results\r\n            console.log('üèÅ Time expired on last question, completing quiz and navigating to results');\r\n            \r\n            try {\r\n                const response = await api.post('/submissions/complete', {\r\n                    submissionId: currentSubmission.id\r\n                });\r\n                \r\n                console.log('‚úÖ Quiz auto-completed successfully!', response.data);\r\n                \r\n                // Navigate to results page\r\n                const resultsUrl = `/student/quiz-results/${currentSubmission.id}`;\r\n                console.log('üîÑ Auto-navigating to results page:', resultsUrl);\r\n                navigate(resultsUrl, { replace: true });\r\n                \r\n            } catch (err) {\r\n                console.error('‚ùå Failed to auto-complete quiz:', err);\r\n                // Even if completion fails, try to navigate to results\r\n                navigate(`/student/quiz-results/${currentSubmission.id}`, { replace: true });\r\n            }\r\n        } else {\r\n            // Move to next question\r\n            console.log('‚è≠Ô∏è Time expired, moving to next question:', currentQuestionIdx + 1);\r\n            setCurrentQuestionIndex(currentQuestionIdx + 1);\r\n        }\r\n    }, []); // Empty dependency array since we're using refs\r\n\r\n    const handleAnswerSelect = async (questionId, optionId) => {\r\n        // Just update local state - don't submit to server yet\r\n        const newAnswers = {\r\n            ...answers,\r\n            [questionId]: optionId\r\n        };\r\n        \r\n        setAnswers(newAnswers);\r\n        \r\n        console.log('Answer selected locally for question:', questionId, 'option:', optionId, 'type:', typeof optionId);\r\n        console.log('Updated answers state:', newAnswers);\r\n    };\r\n\r\n    const handleNextQuestion = async () => {\r\n        const currentQuestion = quiz.questions[currentQuestionIndex];\r\n        const answer = answers[currentQuestion.id];\r\n\r\n        console.log('Next button clicked. Current question:', currentQuestion.id, 'Answer:', answer, 'Type:', typeof answer);\r\n\r\n        // Submit the answer when moving to next question\r\n        if (submission && answer != null && answer !== undefined) {\r\n            try {\r\n                console.log('Submitting answer when moving to next question:', currentQuestion.id, 'answer:', answer);\r\n                \r\n                await api.post('/submissions/answer', {\r\n                    submissionId: submission.id,\r\n                    questionId: currentQuestion.id,\r\n                    selectedOptionId: answer\r\n                });\r\n\r\n                console.log('Answer submitted successfully for question:', currentQuestion.id);\r\n            } catch (err) {\r\n                console.error('Failed to submit answer:', err);\r\n                setError(err.response?.data?.message || 'Failed to submit answer');\r\n                return; // Don't move to next question if submission failed\r\n            }\r\n        } else {\r\n            console.log('No answer to submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\r\n        }\r\n\r\n        // Move to next question\r\n        if (currentQuestionIndex < quiz.questions.length - 1) {\r\n            setCurrentQuestionIndex(currentQuestionIndex + 1);\r\n        }\r\n    };\r\n\r\n    const handlePreviousQuestion = async () => {\r\n        const currentQuestion = quiz.questions[currentQuestionIndex];\r\n        const answer = answers[currentQuestion.id];\r\n\r\n        console.log('Previous button clicked. Current question:', currentQuestion.id, 'Answer:', answer, 'Type:', typeof answer);\r\n\r\n        // Submit the current question's answer before going back\r\n        if (submission && answer != null && answer !== undefined) {\r\n            try {\r\n                console.log('Submitting answer before going to previous question:', currentQuestion.id);\r\n                \r\n                await api.post('/submissions/answer', {\r\n                    submissionId: submission.id,\r\n                    questionId: currentQuestion.id,\r\n                    selectedOptionId: answer\r\n                });\r\n\r\n                console.log('Answer submitted successfully before going back');\r\n            } catch (err) {\r\n                console.error('Failed to submit answer before going back:', err);\r\n                setError(err.response?.data?.message || 'Failed to submit answer');\r\n            }\r\n        } else {\r\n            console.log('No answer to submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\r\n        }\r\n\r\n        if (currentQuestionIndex > 0) {\r\n            setCurrentQuestionIndex(currentQuestionIndex - 1);\r\n        }\r\n    };\r\n\r\n    const handleQuestionJump = async (index) => {\r\n        const currentQuestion = quiz.questions[currentQuestionIndex];\r\n        const answer = answers[currentQuestion.id];\r\n\r\n        // Submit the current question's answer before jumping\r\n        if (submission && answer !== undefined && answer !== '') {\r\n            try {\r\n                console.log('Submitting answer before jumping from question:', currentQuestion.id, 'to question:', index + 1);\r\n                \r\n                await api.post('/submissions/answer', {\r\n                    submissionId: submission.id,\r\n                    questionId: currentQuestion.id,\r\n                    selectedOptionId: answer\r\n                });\r\n\r\n                console.log('Answer submitted successfully before jumping');\r\n            } catch (err) {\r\n                console.error('Failed to submit answer before jumping:', err);\r\n                setError(err.response?.data?.message || 'Failed to submit answer');\r\n            }\r\n        }\r\n\r\n        setCurrentQuestionIndex(index);\r\n    };\r\n\r\n    const handleCompleteQuiz = async (skipFinalAnswerSubmission = false) => {\r\n        try {\r\n            setSubmitting(true);\r\n            \r\n            // Always submit the current question's answer before completing the quiz\r\n            if (quiz && quiz.questions && quiz.questions[currentQuestionIndex]) {\r\n                const currentQuestion = quiz.questions[currentQuestionIndex];\r\n                const answer = answers[currentQuestion.id];\r\n                \r\n                console.log('Before completing quiz - submitting final answer for question:', currentQuestion.id, 'answer:', answer);\r\n                \r\n                if (submission && answer != null && answer !== undefined) {\r\n                    try {\r\n                        console.log('Submitting final answer before quiz completion:', currentQuestion.id, 'answer:', answer);\r\n                        \r\n                        await api.post('/submissions/answer', {\r\n                            submissionId: submission.id,\r\n                            questionId: currentQuestion.id,\r\n                            selectedOptionId: answer\r\n                        });\r\n                        \r\n                        console.log('‚úÖ Final answer submitted successfully for question:', currentQuestion.id);\r\n                    } catch (err) {\r\n                        console.error('‚ùå Failed to submit final answer:', err);\r\n                        // Continue with quiz completion even if final answer submission fails\r\n                    }\r\n                } else {\r\n                    console.log('‚ö†Ô∏è No final answer to submit for question:', currentQuestion.id, 'Answer value:', answer, 'Type:', typeof answer);\r\n                }\r\n            }\r\n            \r\n            // Small delay to ensure answer is processed\r\n            await new Promise(resolve => setTimeout(resolve, 500));\r\n            \r\n            console.log('üèÅ Completing quiz with submission ID:', submission.id);\r\n            const response = await api.post('/submissions/complete', {\r\n                submissionId: submission.id\r\n            });\r\n            \r\n            console.log('‚úÖ Quiz completed successfully!', response.data);\r\n            \r\n            // Navigate to results page\r\n            const resultsUrl = `/student/quiz-results/${submission.id}`;\r\n            console.log('üîÑ Navigating to results page:', resultsUrl);\r\n            navigate(resultsUrl, { replace: true });\r\n            \r\n        } catch (err) {\r\n            console.error('‚ùå Failed to complete quiz:', err);\r\n            console.error('‚ùå Error response:', err.response);\r\n            console.error('‚ùå Error status:', err.response?.status);\r\n            console.error('‚ùå Error data:', err.response?.data);\r\n            \r\n            // Show more detailed error information\r\n            const errorMessage = err.response?.data?.message || err.message || 'Failed to complete quiz';\r\n            setError(`Failed to complete quiz: ${errorMessage}`);\r\n            \r\n            // If it's a server error, still try to navigate to results\r\n            if (err.response?.status >= 500) {\r\n                console.log('üîÑ Server error occurred, but attempting to navigate to results anyway');\r\n                navigate(`/student/quiz-results/${submission.id}`, { replace: true });\r\n            }\r\n        } finally {\r\n            setSubmitting(false);\r\n            setShowConfirmSubmit(false);\r\n        }\r\n    };\r\n\r\n    const calculateProgress = () => {\r\n        if (!quiz) return 0;\r\n        const answered = Object.keys(answers).length;\r\n        return Math.round((answered / quiz.questions.length) * 100);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"container mt-4\">\r\n                <div className=\"d-flex justify-content-center align-items-center min-vh-100\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"spinner-border text-primary mb-3\" role=\"status\">\r\n                            <span className=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                        <p>Starting your quiz...</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"container mt-4\">\r\n                <div className=\"alert alert-danger\">\r\n                    <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n                    {error}\r\n                </div>\r\n                <button className=\"btn btn-primary\" onClick={() => navigate('/student/quizzes')}>\r\n                    Back to Quizzes\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!quiz || !submission) {\r\n        return (\r\n            <div className=\"container mt-4\">\r\n                <div className=\"alert alert-warning\">\r\n                    <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n                    Quiz not found or not accessible.\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const currentQuestion = quiz.questions[currentQuestionIndex];\r\n    const progress = calculateProgress();\r\n\r\n    return (\r\n        <div className=\"container-fluid mt-4\">\r\n            {/* Quiz Header */}\r\n            <div className=\"row mb-4\">\r\n                <div className=\"col-12\">\r\n                    <div className=\"card\">\r\n                        <div className=\"card-header\">\r\n                            <div className=\"row align-items-center\">\r\n                                <div className=\"col-md-4\">\r\n                                    <h5 className=\"mb-0\">{quiz.title}</h5>\r\n                                    <small className=\"text-muted\">{quiz.class_name}</small>\r\n                                </div>\r\n                                <div className=\"col-md-4 text-center\">\r\n                                    <div className=\"h4 mb-0\">\r\n                                        Question {currentQuestionIndex + 1} of {quiz.questions.length}\r\n                                    </div>\r\n                                    <div className=\"progress mt-2\">\r\n                                        <div \r\n                                            className=\"progress-bar\" \r\n                                            style={{ width: `${progress}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                    <small className=\"text-muted\">{progress}% completed</small>\r\n                                </div>\r\n                                <div className=\"col-md-4 text-end\">\r\n                                    {/* Per-question timer */}\r\n                                    <div className=\"h4 mb-0 text-warning\">\r\n                                        <i className=\"fas fa-stopwatch me-2\"></i>\r\n                                        Time left: {questionTimeLeft}s\r\n                                    </div>\r\n                                    <small className=\"text-muted\">Auto-moves when time expires</small>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                {/* Question Navigation */}\r\n                <div className=\"col-md-3\">\r\n                    <div className=\"card sticky-top\">\r\n                        <div className=\"card-header\">\r\n                            <h6 className=\"mb-0\">Question Navigation</h6>\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                            <div className=\"row g-2\">\r\n                                {quiz.questions.map((question, index) => (\r\n                                    <div key={question.id} className=\"col-4\">\r\n                                        <button\r\n                                            className={`btn btn-sm w-100 ${\r\n                                                index === currentQuestionIndex \r\n                                                    ? 'btn-primary' \r\n                                                    : answers[question.id] \r\n                                                        ? 'btn-success' \r\n                                                        : 'btn-outline-secondary'\r\n                                            }`}\r\n                                            onClick={() => handleQuestionJump(index)}\r\n                                        >\r\n                                            {index + 1}\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"mt-3 small\">\r\n                                <div className=\"d-flex align-items-center mb-1\">\r\n                                    <div className=\"btn btn-sm btn-success me-2\" style={{ width: '20px', height: '20px' }}></div>\r\n                                    <span>Answered</span>\r\n                                </div>\r\n                                <div className=\"d-flex align-items-center mb-1\">\r\n                                    <div className=\"btn btn-sm btn-primary me-2\" style={{ width: '20px', height: '20px' }}></div>\r\n                                    <span>Current</span>\r\n                                </div>\r\n                                <div className=\"d-flex align-items-center\">\r\n                                    <div className=\"btn btn-sm btn-outline-secondary me-2\" style={{ width: '20px', height: '20px' }}></div>\r\n                                    <span>Not answered</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Current Question */}\r\n                <div className=\"col-md-9\">\r\n                    <div className=\"card\">\r\n                        <div className=\"card-header\">\r\n                            <h6 className=\"mb-0\">Question {currentQuestionIndex + 1}</h6>\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                            <div className=\"mb-4\">\r\n                                <h5>{currentQuestion.questionText}</h5>\r\n                                <small className=\"text-muted\">\r\n                                    Points: {currentQuestion.points} | \r\n                                    Type: {currentQuestion.questionType.replace('_', ' ')}\r\n                                </small>\r\n                            </div>\r\n\r\n                            <div className=\"mb-4\">\r\n                                {currentQuestion.options.map((option, optionIndex) => (\r\n                                    <div key={option.id} className=\"form-check mb-3\">\r\n                                        <input\r\n                                            className=\"form-check-input\"\r\n                                            type=\"radio\"\r\n                                            name={`question_${currentQuestion.id}`}\r\n                                            id={`option_${option.id}`}\r\n                                            checked={answers[currentQuestion.id] === option.id}\r\n                                            onChange={() => handleAnswerSelect(currentQuestion.id, option.id)}\r\n                                        />\r\n                                        <label className=\"form-check-label\" htmlFor={`option_${option.id}`}>\r\n                                            <span className=\"badge bg-light text-dark me-2\">\r\n                                                {String.fromCharCode(65 + optionIndex)}\r\n                                            </span>\r\n                                            {option.text}\r\n                                        </label>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Navigation Buttons */}\r\n                            <div className=\"d-flex justify-content-between align-items-center\">\r\n                                <button\r\n                                    className=\"btn btn-outline-secondary\"\r\n                                    onClick={handlePreviousQuestion}\r\n                                    disabled={currentQuestionIndex === 0}\r\n                                >\r\n                                    <i className=\"fas fa-chevron-left me-2\"></i>\r\n                                    Previous\r\n                                </button>\r\n\r\n                                <div className=\"text-center\">\r\n                                    <small className=\"text-muted\">\r\n                                        {Object.keys(answers).length} of {quiz.questions.length} questions answered\r\n                                    </small>\r\n                                    <br />\r\n                                    {/* TEST BUTTON - Remove in production */}\r\n                                    <button\r\n                                        className=\"btn btn-outline-warning btn-sm mt-1\"\r\n                                        onClick={() => {\r\n                                            console.log('üß™ TEST: Manually triggering timer expiry');\r\n                                            handleTimeExpired();\r\n                                        }}\r\n                                        style={{ fontSize: '11px' }}\r\n                                    >\r\n                                        Test Timer Expiry\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {currentQuestionIndex === quiz.questions.length - 1 ? (\r\n                                    <button\r\n                                        className=\"btn btn-success\"\r\n                                        onClick={() => setShowConfirmSubmit(true)}\r\n                                        disabled={submitting}\r\n                                    >\r\n                                        {submitting ? (\r\n                                            <>\r\n                                                <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n                                                Submitting...\r\n                                            </>\r\n                                        ) : (\r\n                                            <>\r\n                                                <i className=\"fas fa-check me-2\"></i>\r\n                                                Submit Quiz\r\n                                            </>\r\n                                        )}\r\n                                    </button>\r\n                                ) : (\r\n                                    <button\r\n                                        className=\"btn btn-primary\"\r\n                                        onClick={handleNextQuestion}\r\n                                    >\r\n                                        Next\r\n                                        <i className=\"fas fa-chevron-right ms-2\"></i>\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Confirm Submit Modal */}\r\n            {showConfirmSubmit && (\r\n                <div className=\"modal fade show\" style={{ display: 'block', backgroundColor: 'rgba(0,0,0,0.5)' }}>\r\n                    <div className=\"modal-dialog\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\">Submit Quiz</h5>\r\n                                <button type=\"button\" className=\"btn-close\" onClick={() => setShowConfirmSubmit(false)}></button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <p>Are you sure you want to submit your quiz?</p>\r\n                                <div className=\"alert alert-info\">\r\n                                    <small>\r\n                                        <strong>Summary:</strong><br/>\r\n                                        ‚Ä¢ Questions answered: {Object.keys(answers).length} of {quiz.questions.length}<br/>\r\n                                        ‚Ä¢ Unanswered questions: {quiz.questions.length - Object.keys(answers).length}<br/>\r\n                                        ‚Ä¢ Current question time: {questionTimeLeft}s remaining\r\n                                    </small>\r\n                                </div>\r\n                                <p className=\"text-warning\">\r\n                                    <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n                                    <strong>Warning:</strong> Once submitted, you cannot change your answers.\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowConfirmSubmit(false)}>\r\n                                    Continue Quiz\r\n                                </button>\r\n                                <button type=\"button\" className=\"btn btn-success\" onClick={handleCompleteQuiz} disabled={submitting}>\r\n                                    {submitting ? 'Submitting...' : 'Submit Quiz'}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\nexport default QuizTaking;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}